import{s as O,n as S,r as B}from"../chunks/scheduler.Cy9pk9AM.js";import{S as D,i as U,e as g,s as T,c as m,a as y,r as A,f as P,d as b,m as r,g as V,h as c,u as C,v as j}from"../chunks/index.x6j4SjtJ.js";import{g as N}from"../chunks/entry.B3rq6gI2.js";import{e as k}from"../chunks/public.CpIIhdHb.js";function z(o){let a,e,l,v="Create a New Post",d,t,i,n,_,f,s,w="Post",x,E;return{c(){a=g("div"),e=g("div"),l=g("h2"),l.textContent=v,d=T(),t=g("input"),i=T(),n=g("textarea"),_=T(),f=g("div"),s=g("button"),s.textContent=w,this.h()},l(u){a=m(u,"DIV",{class:!0});var h=y(a);e=m(h,"DIV",{class:!0});var p=y(e);l=m(p,"H2",{class:!0,"data-svelte-h":!0}),A(l)!=="svelte-ml0c39"&&(l.textContent=v),d=P(p),t=m(p,"INPUT",{type:!0,placeholder:!0,class:!0}),i=P(p),n=m(p,"TEXTAREA",{rows:!0,placeholder:!0,class:!0}),y(n).forEach(b),_=P(p),f=m(p,"DIV",{class:!0});var I=y(f);s=m(I,"BUTTON",{class:!0,"data-svelte-h":!0}),A(s)!=="svelte-w8643"&&(s.textContent=w),I.forEach(b),p.forEach(b),h.forEach(b),this.h()},h(){r(l,"class","text-xl font-semibold"),r(t,"type","text"),r(t,"placeholder","Title"),r(t,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"),r(n,"rows","5"),r(n,"placeholder","Write something..."),r(n,"class","w-full px-4 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"),r(s,"class","px-6 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"),r(f,"class","flex justify-end w-full"),r(e,"class","flex flex-col gap-6 w-full max-w-lg bg-base-100 shadow-lg p-6 rounded-lg"),r(a,"class","flex items-center justify-center w-full h-full text-sm p-6")},m(u,h){V(u,a,h),c(a,e),c(e,l),c(e,d),c(e,t),C(t,o[0]),c(e,i),c(e,n),C(n,o[1]),c(e,_),c(e,f),c(f,s),x||(E=[j(t,"input",o[4]),j(n,"input",o[5]),j(s,"click",o[2])],x=!0)},p(u,[h]){h&1&&t.value!==u[0]&&C(t,u[0]),h&2&&C(n,u[1])},i:S,o:S,d(u){u&&b(a),x=!1,B(E)}}}function H(o,a,e){let l,v,{data:d}=a,t="",i="";async function n(){if(!l||!v){N("/login");return}if(t===""||i===""){console.log("Invalid reply content");return}const s=await fetch(`${k.PUBLIC_API_HOST}/api/posts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({title:t,content:i})});if(!s.ok){const x=await s.json();console.error("Error:",x)}const{post:w}=await s.json();N(`/posts/${w.id}`)}function _(){t=this.value,e(0,t)}function f(){i=this.value,e(1,i)}return o.$$set=s=>{"data"in s&&e(3,d=s.data)},o.$$.update=()=>{o.$$.dirty&8&&(l=d.user),o.$$.dirty&8&&(v=d.jwt)},[t,i,n,d,_,f]}class W extends D{constructor(a){super(),U(this,a,H,z,O,{data:3})}}export{W as component};
